import{u as x,U as h,j as e,O as p,D as f,L as j}from"./index-d42f823f.js";class i extends Error{}i.prototype.name="InvalidTokenError";function g(a){return decodeURIComponent(atob(a).replace(/(.)/g,(t,n)=>{let s=n.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function u(a){let t=a.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return g(t)}catch{return atob(t)}}function N(a,t){if(typeof a!="string")throw new i("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,s=a.split(".")[n];if(typeof s!="string")throw new i(`Invalid token specified: missing part #${n+1}`);let c;try{c=u(s)}catch(l){throw new i(`Invalid token specified: invalid base64 for part #${n+1} (${l.message})`)}try{return JSON.parse(c)}catch(l){throw new i(`Invalid token specified: invalid json for part #${n+1} (${l.message})`)}}const o=()=>{const a=localStorage.getItem("token"),t=N(a),n=()=>h(`/api/v1/orders/user/${t==null?void 0:t.id}`),{data:s,isLoading:c}=x("userOrders",n);return[s,c]},w=()=>{var n;const[a]=o();function t(s){const c=new Date(s),l=c.getDate(),r=c.getMonth()+1,d=c.getFullYear();return`${l}/${r}/${d}`}return e.jsx(e.Fragment,{children:e.jsx("div",{className:" p-2 ",children:(n=a==null?void 0:a.data)==null?void 0:n.map((s,c)=>{var l;return e.jsxs("div",{className:"rounded-3 bg-light p-3  mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap-reverse ",children:[e.jsxs("h5",{className:"fw-bold",children:["Total order price : ",e.jsxs("span",{className:"fw-light text-main",children:[s==null?void 0:s.totalOrderPrice," EGP"]})]}),e.jsxs("span",{className:"fw-bold fs-5 mb-2",children:["Order # ",c+1]})]}),(l=s==null?void 0:s.cartItems)==null?void 0:l.filter(r=>r.count!==0).map((r,d)=>{var m;return e.jsxs("div",{className:"mb-2  p-3 row gy-2 align-items-center",children:[e.jsx("div",{className:"col-md-2",children:e.jsx("img",{src:(m=r==null?void 0:r.product)==null?void 0:m.imageCover,alt:"",className:"w-100"},d)}),e.jsxs("div",{className:"col-md-10",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[e.jsxs("p",{children:["Category : ",e.jsx("span",{className:"text-muted",children:r.product.category.name})]}),e.jsxs("p",{className:"fs-5",children:[e.jsx("i",{className:"fa fa-star rating-color"}),"(",r.product.ratingsAverage,")"]})]}),e.jsxs("p",{children:["Describtion : ",e.jsx("span",{className:"text-muted",children:r.product.title})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[e.jsxs("p",{className:"d-flex align-items-center",children:["Quantity : ",e.jsx("span",{className:"text-muted fs-5",children:r.count})]}),e.jsxs("p",{className:"fs-5",children:["Price : ",e.jsxs("span",{className:"text-main",children:[r.price," EGP"]})]})]})]})]},d)}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[e.jsxs("p",{className:"fs-5",children:["Is paid :",e.jsx("span",{className:"text-muted",children:s.isPaid?"yes":"No"})]}),e.jsxs("p",{className:"fs-5",children:["Is delivered :",e.jsx("span",{className:"text-muted",children:s.isDelivered?"yes":"No"})]})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[e.jsxs("p",{className:"fs-5",children:["Payment method :",e.jsx("span",{className:"text-muted",children:s==null?void 0:s.paymentMethodType})]}),e.jsxs("h5",{children:["Created At : ",e.jsx("span",{className:"text-muted",children:t(s.createdAt)})," "]})]})]},c)})})})},b=()=>{const[,a]=o();return document.title="All orders",e.jsxs(e.Fragment,{children:[e.jsx(p,{children:e.jsx(f,{})}),a?e.jsx(j,{}):e.jsx("div",{className:"container mt-3 mb-5",children:e.jsxs("div",{className:"mx-auto bg-main-light   rounded-2 ",children:[e.jsx("p",{className:"fw-bold px-3 py-2 ",children:"My Orders"}),e.jsx(w,{})]})})]})};export{b as default};
